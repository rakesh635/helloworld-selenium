podTemplate(label: "mypod", 
                    cloud: "openshift", 
                    inheritFrom: "maven", 
                    containers: [
            containerTemplate(name: "jnlp", 
                              image: "registry.redhat.io/openshift4/ose-jenkins-agent-maven", 
                              resourceRequestMemory: "256Mi", 
                              resourceLimitMemory: "256Mi", 
                              envVars: [

            ]),
            containerTemplate(name: 'base', 
                              image: 'registry.redhat.io/rhmap47/fh-scm',
                              ttyEnabled: true,
                              command: 'cat',
                              resourceRequestMemory: "256Mi", 
                              resourceLimitMemory: "256Mi", 
                              envVars: [
            ])
          ]) {
          node("mypod") { 
            //sh "git clone https://github.com/openshift/openshift-jee-sample.git ."
            stage('Check running containers') {
                container('base') {
                    checkout changelog: false, poll: false, scm: [$class: 'GitSCM', branches: [[name: '*/develop']], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'helloworld-selenium/'], [$class: 'CloneOption', depth: 0, noTags: true, reference: '', shallow: false]], submoduleCfg: [], userRemoteConfigs: [[url: 'https://github.com/rakesh635/helloworld-selenium.git']]]
                    dir('helloworld-selenium/') {
                        sh 'git checkout develop'
                        sh 'cat src/main/webapp/index.jsp'
                    }
                }
            }
            stage('checkout') {
              sh "pwd"
              sh "ls"
              sh "git clone --branch openshift https://github.com/rakesh635/helloworld-selenium.git ."
            }
            stage("Maven build") {
              sh "mvn -B -Popenshift package"
            }
            stage("Openshift deploy")
            {
              sh "oc start-build -F wildfly --from-file=target/ROOT.war -n rakesh635-test"
            }  
            stage("Dummy Web Regression Test")
            {
              sh "echo 'Dummy Web Regression Test'"
            } 
            stage("Dummy API Regression Test")
            {
              sh "echo 'Dummy API Regression Test'"
            } 
            stage("Dummy Desktop Test")
            {
              sh "echo 'Dummy Desktop Test'"
            } 
            stage("Dummy Performance Test")
            {
              sh "echo 'Dummy Performance Test'"
            } 
          }
        }
